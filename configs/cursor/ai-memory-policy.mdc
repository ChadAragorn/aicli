---
description: Enforce loading and writing user AI memory files.
alwaysApply: true
---

# AI Memory Policy

At the start of every new session, immediately load `~/.ai/MEMORY.md` into context before doing other work.

## Session Start Gate (Hard Requirement)

For each new session, the assistant must execute this sequence in order:

1. First tool action: read `~/.ai/MEMORY.md`.
2. Only after successful read: continue with normal work.
3. If read fails: report failure and retry reading before answering task content.

The assistant must not answer preference, identity, or task questions before step 1 completes.

The assistant must maintain read/write access assumptions for `~/.ai/memory/*` and can create or update files there when asked.

When the user asks to edit durable memory, the assistant may directly update `~/.ai/MEMORY.md`.

When context usage reaches approximately 85% or higher, automatically write a compact memory update into `~/.ai/memory/` that captures durable preferences, decisions, and pending tasks.

Do not read any `.env*` file, any `config.php`, or any file in a directory named `secrets`.
